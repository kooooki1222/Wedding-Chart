<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Digital Seating Chart</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root { --h-white: #F8F9FA; --h-blue: #0087AA; --h-beige: #E2D7C1; --h-text: #4A4A4A; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; background-color: var(--h-white); font-family: 'Montserrat', 'Noto Serif JP', serif; color: var(--h-text); overflow-x: hidden; }
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--h-white); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease; }
        .orchid-icon { width: 50px; height: 50px; border: 2px solid var(--h-blue); border-radius: 50%; margin-bottom: 20px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.3; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0.3; transform: scale(0.9); } }
        header { padding: 50px 20px 20px; text-align: center; }
        header h1 { font-size: 1.3rem; letter-spacing: 0.3rem; font-weight: 300; margin: 0; color: var(--h-blue); }
        .search-container { padding: 0 25px; position: sticky; top: 15px; z-index: 100; }
        #guest-search { width: 100%; padding: 15px 20px; border: 1px solid var(--h-beige); border-radius: 30px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px); font-size: 1rem; outline: none; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        #search-results { background: white; margin-top: 8px; border-radius: 15px; max-height: 250px; overflow-y: auto; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none; border: 1px solid var(--h-white); }
        .result-item { padding: 15px 20px; border-bottom: 1px solid var(--h-white); display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .map-container { padding: 30px 20px 120px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; max-width: 450px; margin: 0 auto; }
        .table-node { aspect-ratio: 1; background: white; border: 1px solid var(--h-beige); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.9rem; transition: all 0.4s ease; }
        .table-node.highlight { background: var(--h-blue); color: white; border-color: var(--h-blue); transform: scale(1.25); box-shadow: 0 0 20px rgba(0, 135, 170, 0.5); z-index: 10; }
        .footer-card { position: fixed; bottom: -100%; left: 0; width: 100%; background: white; padding: 40px 20px; border-radius: 30px 30px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.1); transition: bottom 0.5s ease; text-align: center; z-index: 200; }
        .footer-card.active { bottom: 0; }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 2rem; color: var(--h-beige); font-weight: 300; cursor: pointer; }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div class="orchid-icon"></div>
        <p style="letter-spacing:4px;font-size:0.7rem;color:var(--h-blue);">HALEKULANI STYLE</p>
    </div>

    <header><h1>SEATING CHART</h1></header>

    <div class="search-container">
        <input type="text" id="guest-search" placeholder="お名前を入力してください" autocomplete="off">
        <div id="search-results"></div>
    </div>

    <div class="map-container" id="floor-map"></div>

    <div class="footer-card" id="info-card">
        <span class="close-btn" onclick="closeCard()">×</span>
        <p id="card-guest-name" style="font-weight:500;margin:0;"></p>
        <h2 id="card-table-name" style="color:var(--h-blue);margin:10px 0; font-size: 2rem;"></h2>
        <p style="font-size:0.9rem;line-height:1.6;opacity:0.8;">本日はお越しいただきありがとうございます。<br>お席にて、素敵なひとときをお過ごしください。</p>
    </div>

    <script>
        // データ部分：エラー回避のため最小限の構成
        const data = [
            ["川上","由樹","かわかみ","A"],["川村","昂広","かわむら","A"],["四宮","雄平","しのみや","A"],["野口","純平","のぐち","A"],["松下","隼也","まつした","A"],["三俣","孔輝","みつまた","A"],["宮本","孝輝","みやもと","A"],
            ["秋山","裕紀","あきやま","B"],["木菱","勇太","きびし","B"],["神","奎輔","じん","B"],["高橋","広平","たかはし","B"],["鈴木","拓真","すずき","B"],["上福元","研生","かみふくもと","B"],
            ["今井","俊之介","いまい","C"],["宇都宮","瑞生","うつのみや","C"],["白石","啓太","しらいし","C"],["橋本","真司","はしもと","C"],["山口","和樹","やまぐち","C"],
            ["田中","李佳","たなか","D"],["藤木","加奈","ふじき","D"],["阿部","夕枝","あべ","D"],["木之下","侑奈","きのした","D"],["志藤","理賀","しとう","D"],["森松","茉利萌","もりまつ","D"],
            ["加藤","大輝","かとう","E"],["小林","将悟","こばやし","E"],["佐野","勇磨","さの","E"],["田中","宏樹","たなか","E"],["田中","佑典","たなか","E"],["中島","悠貴","なかじま","E"],["中山","雅登","なかやま","E"],["中村","亮太","なかむら","E"],
            ["井上","陽介","いのうえ","F"],["奥山","達斗","おくやま","F"],["小出","康寛","こいで","F"],["小林","智洋","こばやし","F"],["佐藤","健","さとう","F"],["高宮","俊介","たかみや","F"],["田中","泰地","たなか","F"],["戸田","悠斗","とだ","F"],["長谷川","裕介","はせがわ","F"],
            ["石上","雄二","いしがみ","G"],["磯崎","由幸","いそざき","G"],["金子","達輝","かねこ","G"],["河辺","隆希","かわべ","G"],["坂元","拓未","さかもと","G"],["中元","勇気","なかもと","G"],["山本","一輝","やまもと","G"],["吉川","太朗","よしかわ","G"],
            ["小松","大智","こまつ","H"],["清水","海渡","しみず","H"],["武中","勇太","たけなか","H"],["谷古宇","慎太郎","やこう","H"],["山崎","匠","やまざき","H"],["渡邉","一樹","わたなべ","H"],
            ["小川","拓哉","おがわ","I"],["佐竹","一輝","さたけ","I"],["竹内","一樹","たけうち","I"],["中島","康博","なかじま","I"],["山本","康太郎","やまもと","I"],["吉永","貴弘","よしなが","I"],
            ["秋元","美玖","あきもと","J"],["石野","有季","いしの","J"],["井野","綾香","いの","J"],["大杉","夏帆","おおすぎ","J"],["岡部","有紗","おかべ","J"],["門内","友紀","もんない","J"],["吉永","早希","よしなが","J"],
            ["阿久津","大輝","あくつ","K"],["入山","貴裕","いりやま","K"],["小川","真理奈","おがわ","K"],["河田","彩香","かわた","K"],["藤島","志織","ふじしま","K"],["細谷","勇気","ほそや","K"],["米村","光","よねむら","K"],
            ["金子","俊介","かねこ","L"],["近藤","康太","こんどう","L"],["田中","翔太","たなか","L"],["中川","真志","なかがわ","L"],["水井","良輔","みずい","L"],["村上","健","むらかみ","L"],["山崎","直也","やまざき","L"],["山口","拓也","やまぐち","L"],
            ["宇井","美穂","うい","M"],["岡部","優美香","おかべ","M"],["川久保","茉由子","かわくぼ","M"],["岸","友里佳","きし","M"],["白根","奈実","しらね","M"],["永井","愛","ながい","M"],["長谷川","真也","はせがわ","M"],
            ["阿部","優佳","あべ","N"],["天野","真実","あまの","N"],["井出","美樹","いで","N"],["及川","綾音","おいかわ","N"],["片野","結衣","かたの","N"],["岡田","有生","おかだ","N"],
            ["小林","大樹","こばやし","O"],["櫻羽","将嘉","さくらば","O"],["中村","勇貴","なかむら","O"],["程島","大輝","ほどしま","O"],["田中","潤之介","たなか","O"],["小畠","正暉","おばた","O"],["村上","太一","むらかみ","O"],
            ["市川","裕賀","いちかわ","P"],["今川","はづき","いまがわ","P"],["佐藤","文香","さとう","P"],["種本","里紗","たねもと","P"],["樋坂","吏香","ひさか","P"],["山本","優衣子","やまもと","P"],["中山","佳保","なかやま","P"],["中山","明菜","なかやま","P"],
            ["狩谷","隆太","かりや","Q"],["栗山","優奈","くりやま","Q"],["塩田","傑","しおた","Q"],["高橋","寛行","たかはし","Q"],["田中","宏樹","たなか","Q"],["山下","悟史","やました","Q"],["和田","健太郎","わだ","Q"],
            ["岡田","万由子","おかだ","R"],["小宮山","健","こみやま","R"],["佐々木","美紗","ささき","R"],["田中","優花","たなか","R"],["常峰","愛","つつみ","R"],["新島","真理奈","にいじま","R"],["星野","桃奈","ほしの","R"],["山本","紗貴子","やまもと","R"],
            ["赤羽","拓実","あかばね","S"],["阿久津","一輝","あくつ","S"],["安藤","遼","あんどう","S"],["井上","大輝","いのうえ","S"],["大井","雅貴","おおい","S"],["川合","慎也","かわい","S"],["佐野","公紀","さの","S"],["中島","崇晴","なかじま","S"],["中野","敬太","なかの","S"],
            ["相澤","誠","あいざわ","T"],["井上","雄太","いのうえ","T"],["大沢","裕一","おおさわ","T"],["久保田","康隆","くぼた","T"],["佐々木","真一","ささき","T"],["高橋","勇一","たかはし","T"],["千葉","健二","ちば","T"],["三浦","勇気","みうら","T"],["望月","伸哉","もちづき","T"],
            ["石山","裕介","いしやま","U"],["井上","悠","いのうえ","U"],["宇佐美","亮","うさみ","U"],["遠藤","光","えんどう","U"],["大塚","康平","おおつか","U"],["小林","健一","こばやし","U"],["佐藤","大輝","さとう","U"],["寺島","康平","てらしま","U"],["原田","大雅","はらだ","U"],["渡部","真也","わたなべ","U"],
            ["石原","悠貴","いしはら","V"],["加藤","正之","かとう","V"],["後藤","亮太","ごとう","V"],["近藤","貴裕","こんどう","V"],["鈴木","健太","すずき","V"],["高島","悠一","たかしま","V"],["田中","康平","たなか","V"],["中山","真一","なかやま","V"],["野口","大輝","のぐち","V"],
            ["阿久津","萌","あくつ","W"],["飯島","由衣","いいじま","W"],["宇佐見","香織","うさみ","W"],["大塚","舞","おおつか","W"],["岡本","美紀","おかもと","W"],["小野寺","優里","おのでら","W"],["加藤","由梨奈","かとう","W"],["金子","美穂","かねこ","W"],
            ["安藤","健","あんどう","X"],["石川","良太","いしかわ","X"],["小沢","宏之","おざわ","X"],["川口","健太郎","かわぐち","X"],["佐藤","慎也","さとう","X"],["鈴木","裕介","すずき","X"],["高橋","大介","たかはし","X"],
            ["阿部","雅美","あべ","Y"],["石田","有紀子","いしだ","Y"],["大井","美樹","おおい","Y"],["岡田","絵里奈","おかだ","Y"],["小川","智美","おがわ","Y"],["加藤","真理奈","かとう","Y"],
            ["阿久津","博之","あくつ","Z"],["飯田","健二","いいだ","Z"],["石井","一輝","いしい","Z"],["大沢","勇気","おおさわ","Z"],["岡田","拓也","おかだ","Z"],["小野","健太","おの","Z"]
        ];

        // ゲストオブジェクト作成
        const guests = data.map(i => ({l:i[0], f:i[1], k:i[2], t:i[3]}));

        // マップ作成
        const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
        const mapArea = document.getElementById('floor-map');
        alphabet.forEach(char => {
            const div = document.createElement('div');
            div.className = 'table-node';
            div.id = 'table-' + char;
            div.textContent = char;
            mapArea.appendChild(div);
        });

        // ローディング解除
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loader = document.getElementById('loading-overlay');
                loader.style.opacity = '0';
                setTimeout(() => { loader.style.display = 'none'; }, 500);
            }, 1000);
        });

        // 検索
        const searchInput = document.getElementById('guest-search');
        const resultsArea = document.getElementById('search-results');

        searchInput.oninput = (e) => {
            const val = e.target.value.trim();
            if (!val) { resultsArea.style.display = 'none'; return; }
            const filtered = guests.filter(g => (g.l+g.f).includes(val) || g.k.includes(val)).slice(0, 5);
            if (filtered.length > 0) {
                resultsArea.innerHTML = filtered.map(g => `
                    <div class="result-item" onclick="select('${g.l} ${g.f}','${g.t}')">
                        <span>${g.l} ${g.f} 様</span>
                        <span style="color:var(--h-blue);font-weight:bold;">Table ${g.t}</span>
                    </div>
                `).join('');
                resultsArea.style.display = 'block';
            } else {
                resultsArea.style.display = 'none';
            }
        };

        function select(name, table) {
            document.querySelectorAll('.table-node').forEach(el => el.classList.remove('highlight'));
            resultsArea.style.display = 'none';
            searchInput.value = name;
            const target = document.getElementById('table-' + table);
            if (target) {
                target.classList.add('highlight');
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            document.getElementById('card-guest-name').textContent = name + ' 様';
            document.getElementById('card-table-name').textContent = 'TABLE ' + table;
            document.getElementById('info-card').classList.add('active');
        }

        function closeCard() {
            document.getElementById('info-card').classList.remove('active');
        }
    </script>
</body>
</html>
